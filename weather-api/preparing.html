<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weather App</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
</head>
<body class="bg-light">
<div class="container py-5">
  <h1 class="text-center mb-4">Weather App</h1>
  <form id="weatherForm" class="d-flex justify-content-center mb-3">
    <input
            type="text"
            id="cityInput"
            class="form-control w-50 me-2"
            placeholder="Enter city name"
            required
    />
    <button type="submit" class="btn btn-primary">Get Weather</button>
  </form>
  <div id="weather" class="text-center">
    <p>Enter a city name to get weather data</p>
  </div>
</div>
<script>
  document.getElementById("weatherForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const city = document.getElementById("cityInput").value;

    try {
      const response = await fetch(`/weather?city=${city}`);
      const data = await response.json();

      if (response.ok) {
        document.getElementById('weather').innerHTML = `
                    <div class="card mx-auto" style="width: 18rem;">
                        <img src="${data.icon}" class="card-img-top" alt="Weather Icon">
                        <div class="card-body">
                            <h5 class="card-title">${data.city}, ${data.country}</h5>
                            <p class="card-text">
                                <strong>Temperature:</strong> ${data.temperature}°C<br>
                                <strong>Feels Like:</strong> ${data.feels_like}°C<br>
                                <strong>Description:</strong> ${data.description}<br>
                                <strong>Humidity:</strong> ${data.humidity}%<br>
                                <strong>Pressure:</strong> ${data.pressure} hPa<br>
                                <strong>Wind Speed:</strong> ${data.wind_speed} m/s<br>
                                <strong>Coordinates:</strong> [${data.coordinates.lat}, ${data.coordinates.lon}]
                            </p>
                        </div>
                    </div>`;
      } else {
        document.getElementById("weather").innerHTML = `<p class="text-danger">${data}</p>`;
      }
    } catch (err) {
      document.getElementById("weather").innerHTML = `<p class="text-danger">Error fetching data</p>`;
    }
  });
</script>
</body>
</html>